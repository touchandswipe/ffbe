<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="Final Fantasy Brave Exvius - Units Guide (Beta) - A community effort" />
    <meta name="author" content="Sam GreenPuck" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Final Fantasy Brave Exvius - Units Guide (Beta) - A community effort</title>
    <link rel="shortcut icon" href="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconavatar128.png" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/be7019ee387/integration/bootstrap/3/dataTables.bootstrap.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <style type="text/css">
.logoShdw {
-webkit-filter: drop-shadow(0px 0px 6px #FF3300);
filter: drop-shadow(0px 0px 5px #FF3300);
margin-top:-8px;
margin-left:-4px;
}
    .affix { position:fixed;left:0px;top:40px;width:100%;z-index:50;background:#E6CCFF;padding:30px 10px 0px 10px;margin:0;box-shadow: 0 4px 4px -2px #888888;; }
    .affix-top { position:static; }
    .evoShdw {
	-webkit-filter: grayscale(100%);
	filter: grayscale(100%);
    }
    .evoCurrent {
	-webkit-filter: drop-shadow(0px 0px 5px #AA00AA);
	filter: drop-shadow(0px 0px 5px #AA00AA);
    }
    .evoUnit { display:inline-block;position:relative;margin-bottom:3px; }
    .evoCaret { display:inline-block;position:relative;width:30px;text-align:center;vertical-align:middle; }
    .vidContain {
	position: relative;
	padding-bottom: 56.25%;
	padding-top: 30px; height: 0; overflow: hidden;
    }
    .vidContain iframe,
    .vidContain object,
    .vidContain embed {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
    }
    .rShow {
    	position:relative;
    	white-space:nowrap;
    	top:-12px;
    	left:10px;
    }
    .rEvo {
	position: absolute;
	white-space: nowrap;
	top: 25px;
	left: 8px;
    }
    .va {vertical-align:middle;}
    .text-fav {color:#FFFFFF;}
    .kdb-r {
    background:#FFCC00;
    color:#000000;
    padding:0 3px 0 3px;
    }
    .kdb-d {
    background:#CC0000;
    color:#FFFFFF;
    font-size:10px;
    padding:2px 3px 2px 3px;
    }
    .release {
    border: 1px solid #CCCCCC;
    display: inline-block;
    border-radius: 5px;
    padding:2px 5px;
    }
    .shareLink {background:#FFDB4D;}
    .sp2 {margin:2px;}
    .clear {clear:both;}
    .flipHori {
	-moz-transform: scaleX(-1);
	-webkit-transform: scaleX(-1);
	-o-transform: scaleX(-1);
	transform: scaleX(-1);
	-ms-filter: fliph; /*IE*/
	filter: fliph; /*IE*/
    }
    table.dataTable thead > tr > th {
	padding-left: 7px;
	padding-right: 15px;
    }
    #monsterTable td {
	border:1px solid #DDD !important;
	border-right-width:1px !important;
    }
    #statsTable td {
	border:1px solid #DDD !important;
    }
    #monsterSummary {
	bottom:0px;
	width: 100%;
	margin: 0 auto 0 auto;
	position: absolute;
	background: rgba(255,255,255,0.85);
    }
    #monsterGeneral {
	background: rgba(255,255,255,0.8);
    }
    .skillShots {
    	position:absolute;
    	height:30px;
    	top:-8px;
    }
    </style>
<!-- START JSON Code-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script type='text/javascript' src='//cdn.datatables.net/1.10.0/js/jquery.dataTables.js'></script>
<script type='text/javascript' src='//cdn.datatables.net/plug-ins/be7019ee387/integration/bootstrap/3/dataTables.bootstrap.js'></script>
<script src="//touchandswipe.github.io/bravefrontier/js/lz-string.min.js"></script>
<script src="//touchandswipe.github.io/monsterstrike/js/msguidecommon.js"></script>
<script type="text/javascript">
var gEvoUnits = []; /*global variable to selected units evoMats*/
var ownSquad = ['','','','','',''];
var oppSquad = ['','','','','',''];
var favUnitObj=[];

/*Get Boss Data*/
function bossDataLoad() {
	var query = "SELECT * FROM " + '1CNQc8zBKPB2fnnLTWO4PXj3wiGAcahkFRVuyLgFB'
		    + " ORDER BY 'name' ASC";
	var encodedQuery = encodeURIComponent(query);
	
	/*Construct URL*/
	var url = [gURL];
	url.push('?sql=' + encodedQuery);
	url.push('&key=' + gKey);
	url.push('&callback=?');

	/*Send the JSONP request*/
	$.ajax({
	  url: url.join(''),
	  dataType: 'jsonp',
	  success: function (data) {
	      bossList = sconvertJSON(data);
	    }
    })
}

/*Reset Squad*/
function clearSquad() {
    for (var i=0;i<6;i++) {
	/*reset images src*/
	$('#squadUnit'+(i+1)).attr('src','');
	$('#squadOpp'+(i+1)).attr('src','');
	/*reset sharing arrays*/
    }
    $('#bossIMG').children('img').attr('src','');
}

/*Convert Google JSON REST*/
function convertJSON( serialObj ) {
    var s = serialObj || {};
    if( !s.columns && !s.rows )
    {
	console.error("convertJSON() >>  was not passed a serialized obj");
	return [];
    }
    /*Create returned object*/
    var obj = [];
    /*Loops through serialObj and matches the columns*/
    for(var i=0; i < s.rows.length; i++)
    {
	var temp = {};
	for(var j=0; j < s.columns.length; j++)
	{ /*replace space with - and lowercase for all*/
	    if (isNaN(s.rows[i][j])) {
		/*check for blanks in hits and fill fields and lord*/
		if ((s.columns[j].toLowerCase().search("power") != -1)||(s.columns[j].toLowerCase().search("cooldown") != -1)||(s.columns[j].toLowerCase().search("_hp") != -1)||(s.columns[j].toLowerCase().search("_atk") != -1)||(s.columns[j].toLowerCase().search("_spd") != -1)) {
		    temp[s.columns[j].toLowerCase()] = 0;
		/*Call Unit Card*/
		} else if (s.columns[j].toLowerCase().search("name") != -1) {
		    temp[s.columns[j].toLowerCase()] = '<a href="#" class="unitName notranslate">'+s.rows[i][j]+'</a>';
		} else { /*general string*/
		    temp[s.columns[j].toLowerCase()] = s.rows[i][j];
		}
	    }
	     /*is blank*/
	    else if (s.rows[i][j] == "") {
		    temp[s.columns[j].toLowerCase()] = "None";
	    } else { /*else number*/
		temp[s.columns[j].toLowerCase()] = parseInt(s.rows[i][j]);
		}
	}
	/*save the new row with column names*/
	obj.push(temp);
    }
    /*Return the objects*/
    return obj;
}

/*Initialise datapull*/
function initialize(fusionData) {
	var tData=fusionData.values.slice(1);
	/*split stats*/
	for (var i in tData) {
		console.log("before "+tData[i][7]);
		tData[i][7]=tData[i][7].split(",")
		console.log("after "+tData[i][7]);
	}
	bbfeTable=$('#mytable').dataTable({
		"data":tData,
		"columns": [
				{ title: "ID" },
				{ title: "Name" },
				{ title: "Rarity" },
				{ title: "Job" },
				{ title: "Gender" },
				{ title: "Race" },
				{ title: "Series" },
				{ title: "HP", data:7.0 },
				{ title: "MP", data:7.1 },
				{ title: "ATK", data:7.2 },
				{ title: "DEF", data:7.3 },
				{ title: "INT", data:7.4 },
				{ title: "SPR", data:7.5 },
				{ title: "Bonus" },
				{ title: "Weapons" },
				{ title: "Armors" },
				{ title: "MagicLvl" },
				{ title: "Trait" },
				{ title: "Magic" },
				{ title: "Special" },
				{ title: "LimitBreak" },
				{ title: "TrustMastery" },
				{ title: "Global" },
				{ title: "Japan" }
				],
		  "order": [[ 0, "asc" ]],
		  "dom": '<"container-fluid searchAffix"<"row"<"col-md-11 col-xs-7 col-sm-9"<"#cSearchBox"f>><"col-md-1 col-xs-5 col-sm-3"C>>><"small pull-right"p>rt<"small pull-left"i><"small"p>',
		  "autoWidth": false,
		  "deferRender": true,
		  "search": { "search": urlParam('query') },
		  "drawCallback": function( settings ) {
			$('.statsInfo').tooltip(); },
		  "initComplete": function( settings, json ) {
		    var DTapi = this.api();
			/*Unbind Search*/
			$('.dataTables_filter input').off();
			/*custom replace search field*/
			$('.dataTables_filter').html('<div class="input-group input-group-sm pull-left" style="width:95%;"><span class="input-group-addon" style="width:15px;"><i class="fa fa-search"></i></span><input type="search" class="form-control" placeholder="e.g. Name, Series, ID. ENTER to update browser URL."></div>');
			$('.searchAffix').affix({
			  offset: { top: 180 }
			});
			/*Show Table upon DRAW and remove progress bar*/
			$('#mytable').show();
			/*hide loader*/
			$('#progressModal').modal('hide');
			/*check for card param*/
			var cardParam=urlParam('monsterid');
			if ( (cardParam != "") && ( cardParam != null) ) {
			    openCard(cardParam);
			    /*needed as show is not included in function*/
			    $('#cardModal').modal('show');
			}
			/*Open Favs via URL*/
			var favParam=urlParam('favUnits');
			if ( (favParam != "") && ( favParam != null) ) {
				sharedFavSelect=favParam.split(',');
				openFav(sharedFavSelect,"Shared units by other players",true);
			}
		  },
		  "language": {
		      "search": "",
		      "infoFiltered": " - filtered from _MAX_ Total Units",
		      "zeroRecords": "No units found matching criteria.",
		      "info": "_START_ to _END_ / _TOTAL_ Units Found" },
		  /*Parsing Fields via Datatables*/
		  "columnDefs":[
		//{ "width": "225", "targets": [ 7,9,12 ] },
		//{ "visible": false, "targets": [ 12,13,14 ] },
		//{ "searchable": false, "targets": [ 8,10,12,13,14,15,16,17,18 ] },
		/*using data instead of render to set DATA for cache */
		{ "targets": [ 1 ], "width":"150",
		"render": function (monster, type, cRow, full )  {
			return '<a href="#" class="unitName notranslate">'+monster+'</a>';
		    }
		},
		/*Rarity*/
		{ 	"targets":[ 2 ],
			"render": function(rarity, type, row, full) {
			    if (type ==='display')
				return rarity+' <i class="fa fa-star"></i>';
			    else
				return rarity;
			}
		}] /*End Customs*/
	}) /*End Datatables Init*/
}/*End init fn*/

/*Fav Modal Units Draw function*/
    function favDraw(drawObj) {
	var favHTML="";
	/*Push HTML via OBJ of favourites*/
	for (var i=0;i<drawObj.length;i++) {
	    favHTML+='<div class="col-xs-1 col-sm-1 col-md-1"><a href="#" class="favIconLink" value="'+$(drawObj[i]['name']).text()+'"><img src="'+drawObj[i]["icon"]+'" width="40"/></a><div class="rShow"><kbd class="kdb-r"><b>'+drawObj[i]['rarity']+'</b><i class="fa fa-star small"></i></kbd></div></div>';
	}
	$('#favIconDisplay').html(favHTML);
    }

/*Open Fav Modal function*/
    function openFav(unitIdArray,titleText,importUnits) {
	var favSortHTML="";
	var unitObj=[];
	/*no unit in fav*/
	if (unitIdArray.length==0) {
	    bfpAlert("No favourites selected",'Add favourite using <div class="btn btn-default btn-sm"><i class="fa fa-star text-muted"></i></div> next to each unit. Favourites are saved in local storage and will reload automatically every visit. If you clear your browser cache, it will be lost.<div class="text-right"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>');
	    } else {
	   /*show fav card */
	$('#favTitle').html(titleText);
	$('#favModal').modal("show");
	
	/*Google analytics*/
	ga('send', 'pageview', {
  		'page': '/vurl/favouritiesfeature',
  		'title': 'Brave Frontier PROs Favourite Feature'
	});
	
	for (var i=0;i < deserialdata.length;i++) {
	    for (var j=0;j < unitIdArray.length;j++) {
		if (deserialdata[i]['id']==unitIdArray[j]) {
		    unitObj.push({
				'id':deserialdata[i]["id"],
				'rarity':deserialdata[i]["rarity"],
				'element':deserialdata[i]["element"],
				'name':deserialdata[i]["name"],
				'icon':deserialdata[i]["icon"]
		    });
		    break;
		}
	    }
	}
	/*Sort buttons*/
	favSortHTML+='<div class="col-xs-12 col-sm-12 col-md-12">'
	if (importUnits) {
	    favSortHTML+='<button type="button" class="btn btn-danger" id="importUnitsBtn" style="margin-right:5px;"><i class="fa fa-cloud-download"></i></button>';
	}
	favSortHTML+='<button type="button" class="btn btn-default sortFav" value="id" style="margin-right:5px;">Sort by ID</button>';
	favSortHTML+='<button type="button" class="btn btn-default sortFav" value="rarity" style="margin-right:5px;">Sort by Rarity</button>';
	favSortHTML+='<button type="button" class="btn btn-default sortFav" value="element">Sort by Element</button></div>';
	$('#favSortDisplay').html(favSortHTML);
	/*Draw Units and assign to global variable for sort features*/
	favUnitObj=unitObj;
	favDraw(unitObj);
	/*Generate Share URL*/
	$('#favLinkDisplay').html('<div class="col-xs-12 col-sm-12 col-md-12"><h5><i class="fa fa-share-alt"></i> <b>Sharing URL:</b> <span id="favShareURL" class="text-danger"><i class="fa fa-spinner fa-spin"></i> Generating sharing link</span>');
	setTimeout(gooShorten(location.protocol + '//' + location.host + location.pathname + "?favUnits=" + encodeURIComponent(unitIdArray.join()), $('#favShareURL') ),5000);
	} /*End Else when fav unit exists*/
    }
    
/*Query unit and openCard*/
      function openCard(whatunit) {
	/*Loader*/
	$('#unitCardHome').html('<h4><i class="fa fa-cog fa-spin"></i> Hatching Monster '+whatunit+' ... please wait</h4><div class="progress progress-striped active"><div class="progress-bar progress-bar-success"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div>');
	/*Choose Main Card n Show Card Modal*/
	$('#cardModal').modal('show');
	$('.nav-tabs a[href="#unitCardHome"]').tab('show');
	/*update state*/
	    var state = { stateUnit: whatunit };
	    history.pushState(state, "test state", "?monsterid="+encodeURIComponent(whatunit) );
	/*Google analytics*/
	var compileURL=location.host + location.pathname + "?monsterid=" + encodeURIComponent(whatunit);
	ga('send', 'pageview', {
  		'page': compileURL,
  		'title': 'Monster Strike Monster Card - ' + whatunit
	});
	
	/*Resets Prev Stats*/
	prevStatsMod=[0,0,0,0,0];
	/*Fix Apostrophe*/
	var whatunit = whatunit.replace("'","\\'");
	var qunitname = "'" + whatunit + "'";
	/*Query*/
	var query2 = "SELECT * FROM " + gTable + 
	    " WHERE 'Name' = " + qunitname;
	var encodedQuery2 = encodeURIComponent(query2);
	
	/*Construct URL*/
	var url2 = [gURL];
	url2.push('?sql=' + encodedQuery2);
	url2.push('&key=' + gKey);
	url2.push('&callback=?');

	/*Send the JSONP request*/
	$.ajax({
	  url: url2.join(''),
	  dataType: 'jsonp',
	  success: function (data2) {
	    ovdata2 = sconvertJSON(data2);
	      var ovid = ovdata2[0]["id"];
	      var ovname = ovdata2[0]["name"];
	      /* strInputString = strInputString.replace(/'/g, "\\'"); */
	      var ovshareURL='<span id="cardShareURL" class="text-danger"><i class="fa fa-spinner fa-spin"></i> Generating sharing link</span>';
	      var ovnext = "";
	      var ovprevious = "";
	    /*Evo trail variable*/
	    var evotrail=[];
	    for (var i=0; i < deserialdata.length; i++)  {
		if (deserialdata[i]["series"] == ovdata2[0]['series']) {
		    evotrail.push({
			'evo1':deserialdata[i]["evo_1"],
			'evo2':deserialdata[i]["evo_2"],
			'evo3':deserialdata[i]["evo_3"],
			'evo4':deserialdata[i]["evo_4"],
			'evo5':deserialdata[i]["evo_5"],
			'ascend1':deserialdata[i]["ascend_1"],
			'ascend2':deserialdata[i]["ascend_2"],
			'ascend3':deserialdata[i]["ascend_3"],
			'ascend4':deserialdata[i]["ascend_4"],
			'ascend5':deserialdata[i]["ascend_5"],
			'rarity':deserialdata[i]["rarity"],
			'name':deserialdata[i]["name"],
			'id':deserialdata[i]["id"]
			})
		}
	    }
	    /*Object Array Sort*/
	    evotrail=evotrail.sort(function(a,b) {
		    return a.rarity-b.rarity;
	    })
	    /*Assembling HTML*/
	    var evotrailHTML='';
	    var evoUnitIdx=0;
	    for(var i=0; i < evotrail.length; i++) {
		if ($(evotrail[i]['name']).text()==ovname) {
		    evotrailHTML+='<div class="evoUnit"><a href="#" class="favIconLink" value="'+$(evotrail[i]['name']).text()+'"><img src="'+evotrail[i]["icon"]+'" class="evoCurrent" width="35"/></a><div class="rEvo"><kbd class="kdb-r"><b>'+evotrail[i]['rarity']+'</b><i class="fa fa-star small"></i></kbd></div></div>';
		    evoUnitIdx=i;
		} else
			evotrailHTML+='<div class="evoUnit"><a href="#" class="favIconLink" value="'+$(evotrail[i]['name']).text()+'"><img src="'+evotrail[i]["icon"]+'" class="evoShdw" width="35"/></a><div class="rEvo"><kbd class="kdb-r"><b>'+evotrail[i]['rarity']+'</b><i class="fa fa-star small"></i></kbd></div></div>';
		/*insert caret for all but last*/
		if (i < evotrail.length-1) {
		    evotrailHTML+='<div class="evoCaret"><i class="fa fa-lg fa-arrow-right text-muted"></i></div>';
		}
	    }
	    /*New Card Design via DIV*/
	    ovHTML='<div class="container-responsive">';
	    	ovHTML+='<div class="row"><div class="col-xs-12 text-center"><div style="position:inherit;"><img class="img-responsive center-block" src="https://googledrive.com/host/0B4hJr8BXxvFZQk5YNzdVR3JFSXM/unit'+ovdata2[0]['id']+'.png" width="350" height="auto" />';
	    ovHTML+='<div class="container" id="monsterSummary">'; /*Start and End of Container*/
		/*Name*/
		    ovHTML+='<div class="row"><div class="col-xs-12 text-center"><h3 style="margin-bottom:0px;"><b><kbd>'+ovdata2[0]['id']+'</kbd> '+ovdata2[0]['name'].toUpperCase()+'</b> <img src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/ele_'+ovdata2[0]['element'].toLowerCase()+'.png" style="width:38px;vertical-alignment:top;"/> <img src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/impact_'+ovdata2[0]['impact type'].toLowerCase()+'.png" style="width:38px;vertical-alignment:top;"/></h3></div></div>';
		    /*rarity*/
		    ovHTML+='<div class="row"><div class="col-xs-12 text-center" style="margin-bottom:5px;">';
		    for (i=0;i<ovdata2[0]['rarity'];i++)
			ovHTML+='<img src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/icon_star.png"/> '
		    ovHTML+='</div></div>';
		    /*general data*/
		    ovHTML+='<div class="row"><div class="col-xs-12 text-center" id="monsterGeneral"><h4 style="margin-top:5px;"><b>Class:</b> '+ovdata2[0]['class']+' &middot; <b>Type:</b> '+ovdata2[0]['type']+'<br/><b>Ability:</b> '+ovdata2[0]['ability']+'</h4></div></div>';
	    ovHTML+='</div>'; /*End of Container*/
	    ovHTML+='</div></div></div>'; 
	    ovHTML+='</div>'; /*end of primary container*/
	    /*stats container*/
	    ovHTML+='<div class="container-responsive"><div class="row"><div class="col-xs-12">';
	    ovHTML+='<table id="statsTable" class="table table-bordered table-condensed small">';
	    	/*sharing URL*/
	    	ovHTML+='<tr><td colspan="5" class="shareLink"><i class="fa fa-share-alt"></i> <b>Sharing URL: </b>'+ovshareURL+'</td></tr>';
		ovHTML+='<tr><td class="btn-default" style="width:20%;"></td>'
		      +'<td class="btn-default" style="width:20%;"><strong>HP</strong></td>'
		      +'<td class="btn-default" style="width:20%;"><strong>ATK</strong></td>'
		      +'<td class="btn-default" style="width:20%;"><strong>SPD</strong></td>'
		      +'<td class="btn-default" style="width:20%;"><strong>LUCK</strong></td></tr>';
	      ovHTML+='<tr><td class="active"><strong>MAX</strong></td>'
		      +'<td class="hpMod">'+ovdata2[0]['max_hp']+'</td>'
		      +'<td class="atkMod">'+ovdata2[0]['max_atk']+'</td>'
		      +'<td class="spdMod">'+ovdata2[0]['max_spd']+'</td>'
		      +'<td>'+ovdata2[0]['max_luck']+'</td></tr>';
	      ovHTML+='<tr><td class="active"><strong>Pimp Limit</strong></td>'
		      +'<td id="pimpHP"><i class="fa fa-plus"></i> '+ovdata2[0]['pimp_hp']+'</td>'
		      +'<td id="pimpATK"><i class="fa fa-plus"></i> '+ovdata2[0]['pimp_atk']+'</td>'
		      +'<td id="pimpSPD"><i class="fa fa-plus"></i> '+ovdata2[0]['pimp_spd']+'</td>'
		      +'<td></td></tr>';
	      ovHTML+='<tr><td class="active"><strong>MAX Pimped</strong></td>'
		      +'<td>'+ovdata2[0]['maxlimit_hp']+'</td>'
		      +'<td>'+ovdata2[0]['maxlimit_atk']+'</td>'
		      +'<td>'+ovdata2[0]['maxlimit_spd']+'</td>'
		      +'<td></td></tr>';
		ovHTML+='</table></div></div>';
	    ovHTML+='</div>'; /*End of Container*/
	    /*strikeshot container*/
	    ovHTML+='<div class="container-responsive"><div class="row"><div class="col-xs-12">';
		    ovHTML+='<table class="table table-bordered table-condensed">';
		    ovHTML+='<tr><td class="btn-warning" style="width:80%;"><img class="skillShots" src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/label_strikeshot.png" /></td><td class="btn-warning" style="width:20%;"><b>COOLDOWN</b></td></tr>';
		    ovHTML+='<tr><td>'+ovdata2[0]['strikeshot']+'</td><td>'+ovdata2[0]['strikeshot cooldown']+'</td></tr>';
		    ovHTML+='</table></div></div>';
	    ovHTML+='</div>'; /*End of Container*/
	    /*bumpcombo container*/
	    ovHTML+='<div class="container-responsive"><div class="row"><div class="col-xs-12">';
		    ovHTML+='<table class="table table-bordered table-condensed">';
		    ovHTML+='<tr><td class="btn-success" style="width:80%;"><img class="skillShots" src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/label_bumpcombo.png" /></td><td class="btn-success" style="width:20%;"><b>POWER</b></td></tr>';
		    ovHTML+='<tr><td>'+ovdata2[0]['bumpcombo1']+'</td><td>'+ovdata2[0]['bumpcombopower1']+'</td></tr>';
		    if (ovdata2[0]['bumpcombo2'] != "" && ovdata2[0]['bumpcombo2'].toLowerCase() != "none")
		    	ovHTML+='<tr><td>'+ovdata2[0]['bumpcombo2']+'</td><td>'+ovdata2[0]['bumpcombopower2']+'</td></tr>';
		    ovHTML+='</table></div></div>';
	    ovHTML+='</div>'; /*End of Container*/
	    
	ovHTML+='</td></tr></table>'
	    $('#unitCardHome').html(ovHTML);
	    /*image accordion*/
	    $('#unitimageacc').html('<img class="img-responsive center-block" src="https://googledrive.com/host/0B4hJr8BXxvFZQk5YNzdVR3JFSXM/unit'+ovdata2[0]['id']+'.png" />');
	    setTimeout(gooShorten(location.protocol + '//' + compileURL, $('#cardShareURL')), 5000);
	  }
	})
} /*End openCard fn*/

/*Compare function*/
    function openCompare(units, tabSwitch) {
    	tabSwitch = tabSwitch || "#unitCompareHome";
    	/*Resets Prev Stats*/
	prevStatsMod=[0,0,0,0,0];
	var qunitname = "";
	
	/*Loader*/
	$('#compareTable').html('<tr><td><h4><i class="fa fa-cog fa-spin"></i> Summoning units to compare ... please wait</h4><div class="progress progress-striped active"><div class="progress-bar progress-bar-danger"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div></td></tr>');
    	$('#compareModal').modal("show");
    	
	/*Google analytics*/
	var compileURL=location.host + location.pathname + "?compare=" + encodeURIComponent(units.join());
	ga('send', 'pageview', {
  		'page': compileURL,
  		'title': "Brave Frontier PROs Compare "+units
	});
	
	for (var i=0; i < units.length; i++) {
	    qunitname += "'"+units[i].replace("'","\\'")+"'";
	    if ( i != units.length-1 ) { 
		qunitname += ",";
	    }
	}
	/*Grab matching ROW*/
	var query = "SELECT * FROM " + gTable + 
	    " WHERE 'Name' IN " + "("+qunitname+")";
	var encodedQuery = encodeURIComponent(query);
	
	/*Construct URL*/
	var url = [gURL];
	url.push('?sql=' + encodedQuery);
	url.push('&key=' + gKey);
	url.push('&callback=?');

	/*Send the JSONP request*/
	$.ajax({
	  url: url.join(''),
	  dataType: 'jsonp',
	  success: function (data) {
	      cData = sconvertJSON(data);
	      tWidth = Math.round((1/(units.length+1))*100)+1;
	      cHTML = '<tbody><tr><td>&nbsp;</td>';
	      
	      /*Construct comparison*/
	      for (var i=0; i < units.length; i++) {
			cHTML+='<td width="'+tWidth+'%"><img src="'+cData[i]['icon']+'" width="60" /></td>' }
		cHTML+='</tr>';
		cHTML+='<tr><td class="shareLink" colspan="'+(units.length+1)+'"><i class="fa fa-share-alt"></i> <b>Sharing URL:</b> <span id="compShareURL" class="text-danger"><i class="fa fa-spinner fa-spin"></i> Generating sharing link</span></td></tr>';
		cHTML+='<td class="active"><b>Unit</b></td>';
	      for (var i=0; i < units.length; i++) {
		  if (cData[i]['gender'] == 'Male') {var ovgender = ' <i class="fa fa-male text-primary"></i> '}
		  else if (cData[i]['gender'] == 'Female') {var ovgender = ' <i class="fa fa-female text-danger"></i> '}
		  else if (cData[i]['gender'] == 'Genderless') {var ovgender = ' <i class="fa fa-android text-success"></i> '}
		  else {var ovgender = ' <i class="fa fa-question text-muted"></i> '}
		  cHTML+='<td><kbd>'+cData[i]['id']+'</kbd>'+ovgender+cData[i]['name']+'</td>' }
	      cHTML+='</tr><td class="active"><i class="fa fa-star"></i><b> / Cost</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['rarity']+'<i class="fa fa-star"></i> / '+cData[i]['cost']+'</td>' }
	      cHTML+='</tr><td class="active"><b>Leader</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['leader skill']+'</td>' }
	      cHTML+='</tr><td class="active"><b>BB</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['bb skill']+'</td>' }
	      cHTML+='</tr><td class="active"><b>SBB</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['sbb skill']+'</td>' }
	      cHTML+='</tr><td class="active"><b>UBB</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['ubb skill']+'</td>' }
	      cHTML+='</tr><td class="active"><b>Hits (N/BB/SBB/UBB)</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['hits']+' / '+cData[i]['bb hits']+' / '+cData[i]['sbb hits']+' / '+cData[i]['ubb hits']+'</td>' }
	      cHTML+='</tr><td class="active"><b>Fill (BB/SBB/UBB)</b></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td>'+cData[i]['bb fill']+' / '+cData[i]['sbb fill']+' / '+cData[i]['ubb fill']+'</td>' }
	      cHTML+='</tr><td class="active"><div class="statsInfo" data-toggle="tooltip" title="Weighted Stats based on Lord type. 1/3 HP, 100% HP ATK DEF, 75% REC"><i class="fa fa-info-circle"></i> <b>Wt stats</b></div></td>';
	      for (var i=0; i < units.length; i++) {
		  if ( isNaN(cData[i]['weighted stats (lord)']) ) {
		      cData[i]['weighted stats (lord)']='-';
		  } else { cData[i]['weighted stats (lord)']=Math.round(cData[i]['weighted stats (lord)']); }
		  cHTML+='<td>'+cData[i]['weighted stats (lord)']+'</td>' }
	      cHTML+='</tr><td class="active"><div class="statsInfo" data-toggle="tooltip" data-trigger="click hover" title="Low (Oracle) to (Lord) to High (Anima) HP"><i class="fa fa-info-circle"></i> <b>HP range</b></div></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td><span class="hpMod text-danger">'+cData[i]['hp oracle']+'</span> <i class="fa fa-caret-right"></i> <span class="hpMod text-info">'+cData[i]['hp lord']+'</span> <i class="fa fa-caret-right"></i> <span class="hpMod text-success">'+cData[i]['hp anima']+'</span></td>' }
	      cHTML+='</tr><td class="active"><div class="statsInfo" data-toggle="tooltip" data-trigger="click hover" title="Low (Guardian) to (Lord) to High (Breaker) ATK"><i class="fa fa-info-circle"></i> <b>ATK range</b></div></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td><span class="atkMod text-danger">'+cData[i]['atk guardian']+'</span> <i class="fa fa-caret-right"></i> <span class="atkMod text-info">'+cData[i]['atk lord']+'</span> <i class="fa fa-caret-right"></i> <span class="atkMod text-success">'+cData[i]['atk breaker']+'</span></td>' }
	      cHTML+='</tr><td class="active"><div class="statsInfo" data-toggle="tooltip" data-trigger="click hover" title="Low (Breaker) to (Lord) to High (Guardian) DEF"><i class="fa fa-info-circle"></i> <b>DEF range</b></div></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td><span class="defMod text-danger">'+cData[i]['def breaker']+'</span> <i class="fa fa-caret-right"></i> <span class="defMod text-info">'+cData[i]['def lord']+'</span> <i class="fa fa-caret-right"></i> <span class="defMod text-success">'+cData[i]['def guardian']+'</span></td>' }
	      cHTML+='</tr><td class="active"><div class="statsInfo" data-toggle="tooltip" data-trigger="click hover" title="Low (Anima) to (Lord) to High (Oracle) REC"><i class="fa fa-info-circle"></i> <b>REC range</b></div></td>';
	      for (var i=0; i < units.length; i++) {
		  cHTML+='<td><span class="recMod text-danger">'+cData[i]['rec anima']+'</span> <i class="fa fa-caret-right"></i> <span class="recMod text-info">'+cData[i]['rec lord']+'</span> <i class="fa fa-caret-right"></i> <span class="recMod text-success">'+cData[i]['rec oracle']+'</span></td>' }

/*Modifications*/
cHTML+='<tr data-toggle="collapse" data-target=".compRows"><td colspan="'+(units.length+1)+'" class="btn-info" style="text-align:center;"><i class="fa fa-caret-down"></i> Apply leader / ally skills and spheres <i class="fa fa-caret-down"></i></td></tr>';

cHTML+='</tr><tr class="compRows collapse out"><td><b>Leader skill</b></td>';
cHTML+='<td colspan="'+units.length+'">';
cHTML+='<div class="form-inline"><select id="lsHP" class="form-control lskill input-sm sp2"><option value="0">HP</option>'+hpModHTML+'</select>'
	+'<select class="form-control lskill input-sm sp2" id="lsATK"><option value="0">ATK</option>'+atkModHTML+'</select>'
	+'<select class="form-control lskill input-sm sp2" id="lsDEF"><option value="0">DEF</option>'+defModHTML+'</select>'
	+'<select class="form-control lskill input-sm sp2" id="lsREC"><option value="0">REC</option>'+recModHTML+'</select>'
	+'</div></td></tr>';
	
cHTML+='<tr class="compRows collapse out"><td><b>Ally skill</b></td>';
cHTML+='<td colspan="'+units.length+'">';
cHTML+='<div class="form-inline"><select id="asHP" class="form-control askill input-sm sp2"><option value="0">HP</option>'+hpModHTML+'</select>'
	+'<select class="form-control askill input-sm sp2" id="asATK"><option value="0">ATK</option>'+atkModHTML+'</select>'
	+'<select class="form-control askill input-sm sp2" id="asDEF"><option value="0">DEF</option>'+defModHTML+'</select>'
	+'<select class="form-control askill input-sm sp2" id="asREC"><option value="0">REC</option>'+recModHTML+'</select>'
	+'</div></td></tr>';

cHTML+='<tr class="compRows collapse out"><td><b>Spheres</b></td>';
cHTML+='<td colspan="'+units.length+'">';
cHTML+='<div class="form-inline"><select class="form-control input-sm sp2" id="sphereA"><option value="0,0,0,0">Sphere A - None</option>'+sphereHTML+'</select>'
	+'<select class="form-control input-sm sp2" id="sphereB"><option value="0,0,0,0">Sphere B - None</option>'+sphereHTML+'</select>'
	+'</div></td></tr>';
	      cHTML+='</tbody>';
	      $('#compareTable').html(cHTML);
	      /*Sprite check Own*/
	      $('#squadChange').html(''); /*Clear Buttons*/
	      for (var i=0; i < units.length; i++) {
		  var ovsprite = "https://googledrive.com/host/0B4hJr8BXxvFZQk1JcFBvT2xEMUk/sprite"+cData[i]['id']+".gif";
		  $('#squadChange').append('<button type="button" class="btn btn-default btn-sm squadALL" style="margin:3px;" value="'+i+'">'+cData[i]['name']+'</button>');
		  var squadEle='#squadUnit'+(i+1);
		  ownSquad[i]=ovsprite;
		  $(squadEle).attr('src',ovsprite);
		  $(squadEle).error( function() {
		  	$(this).unbind();
			$(this).attr('src',"https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif");
		    })
	      }
	      /*Sprite check OPPONENTS*/
	      for (var i=0; i < units.length; i++) {
		  var ovsprite = "https://googledrive.com/host/0B4hJr8BXxvFZQk1JcFBvT2xEMUk/sprite"+cData[i]['id']+".gif";
		  var squadOppEle='#squadOpp'+(i+1);
		  oppSquad[i]=ovsprite;
		  $(squadOppEle).attr('src',ovsprite);
		  $(squadOppEle).error( function() {
		  	$(this).unbind();
		      $(this).attr('src',"https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif");
		    })
	      }
	    /*Populates Custom Select Fields - custom is a row */
	    var customFieldHTML='';
	    for (var i=0; i < 6; i++) {
		customFieldHTML+='<div class="col-xs-6 col-sm-6 col-md-6"><select id="cFSelect'+i+'" class="form-control input-sm cFSquad" style="margin-bottom:2px;">';
		customFieldHTML+='<option value="None">None</option>';
		for (var j=0; j < cData.length; j++) {
		    customFieldHTML+='<option value="'+j+'" ';
		    if (i == j) {
			customFieldHTML+='selected="selected"';
		    }
		    customFieldHTML+='>'+cData[j].name+'</option>';
		}
		customFieldHTML+='</select></div>';
	    }
	    $('#customSquad').html(customFieldHTML);
	    /*Populates Boss data when only 1 option*/
	    if ($('#bossSelect option').size() == 1) {
	    for (var i=0; i < bossList.length; i++) {
		$("#bossSelect").append( $("<option></option>")
			.text(bossList[i].name)
			.val(bossList[i].shortname)
		);
	    }
	    }
	    /*Evo Calculator Code*/
	      var evoMat=[];
	      var evoIdx=-1;
	      for (var i=0; i < cData.length; i++) {
		for (var j=1; j<6; j++) {
		    var evoCheck=cData[i]["evo "+j];
		    if ((evoCheck!="") && (evoCheck!="None")) {
			if (evoMat.length === 0) {
			    evoMat.push( {"mat":evoCheck,"count":1} );
			} else {
				    /*New Evo mat to add*/
				    for (k=0; k < evoMat.length; k++) {
					if (evoMat[k].mat==evoCheck) {
					    evoIdx=k;
					    break;
					} else { 
					    evoIdx=-1
					}
				    }
				    if (evoIdx === -1) {
					evoMat.push( {"mat":evoCheck,"count":1} );
				    } else {
				    /*add to existing*/
					evoMat[evoIdx].count+=1;
				    }
			    }
		    } /*End blank or none check*/
		}
	      }
	    evoMat=evoMat.sort(function(a,b) {
		    if (a.mat < b.mat) return -1;
	    if (a.mat > b.mat) return 1;
	    return 0;
	    })
	    /*carry over to global var*/
	    for (i=0;i<cData.length;i++) {
		gEvoUnits.push( {"evo 1":cData[i]['evo 1'],"evo 2":cData[i]['evo 2'],"evo 3":cData[i]['evo 3'],"evo 4":cData[i]['evo 4'],"evo 5":cData[i]['evo 5'] } );
	    }
	    /*Prepare HTML*/
	    var evoCHTML="";
	    evoCHTML+='<div class="col-md-12"><h4><i class="fa fa-thumb-tack"></i> Units Evolution Summary</h4>';
	    evoCHTML+='<table id="compareTable" class="table table-hover table-striped table-bordered table-responsive table-condensed small"><thead><tr><th>Unit</th><th>Qty</th><th colspan="5">Evolution materials</th></tr></thead>';
	    for (i=0;i<cData.length;i++){	    
	    evoCHTML+='<tr>';
	    evoCHTML+='<td><img src="'+cData[i]['icon']+'" width="40"/> <i class="fa fa-chevron-right text-muted"></i></td>';
	    /*Check for blank and none*/
	    if ( (cData[i]['evo 1']!="") && (cData[i]['evo 1']!="None") ) {
		evoCHTML+='<td style="vertical-align:middle;"><div><select id="sEvoUnit'+i+'" class="form-control input-sm evoMatSelect">'+'><option value="0">0</option><option value="1" selected="selected">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option></select></td>';
		for (j=1;j<6;j++){
		    evoCHTML+='<td style="vertical-align:middle;"><img src="'+getEvoIMG(cData[i]['evo '+j])+'" width="35"/></td>';
		}
	    } else {
		 evoCHTML+='<td colspan="6"> No further evolution available OR Materials unknown at the moment.</td>';
	    }
	    evoCHTML+='</tr>';
	    }
	    evoCHTML+='</table></div>';
	    /*Total sorted list of materials needed*/
	    evoCHTML+='<div class="col-xs-12 col-md-12"><h4><i class="fa fa-thumb-tack"></i> Total Evolution Materials Needed</h4></div>';
	    evoCHTML+='<div id="totalEvoMats">';
	    for (i=0;i<evoMat.length;i++) {
		evoCHTML+='<div class="col-xs-1 col-md-1">';
		evoCHTML+='<img src="'+getEvoIMG(evoMat[i].mat)+'" width="35"/>';
		evoCHTML+='<h4><b>x</b>'+evoMat[i].count+'</h4>';
		evoCHTML+='</div>';
	    }
	    evoCHTML+='</div>';
	    evoCHTML+='<div class="col-xs-12 col-md-12"><h6><small>Zel Costs .. may be coming soon</h6></div>';
	    $('#evoCalcContent').html(evoCHTML);
	    /*End Evo*/
	    setTimeout(gooShorten(location.protocol + '//' + compileURL, $('#compShareURL')),5000);
	    $('.nav-tabs a[href="'+tabSwitch+'"]').tab('show')
	  }
	})
} /*End openCompare*/
</script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48617906-1', 'auto');
  ga('send', 'pageview');
</script>
</head>

<!-- MAIN BODY CONTENT -->
<body>
    <!-- Static navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
	<div class="navbar-header">
	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	  </button>
	  <a class="navbar-brand" href="http://bravefrontierpros.tumblr.com"><img src="https://googledrive.com/host/0B4hJr8BXxvFZZkZKQzkwUXpXdkU/logo_ms.png" class="img-circle logoShdw" width="64" alt="Monster Strike PROs"/></a>
	</div>
	
	<!-- Collapse Nav-->
	<div class="navbar-collapse collapse">
	<!-- RIGHT NAV -->
	<button id="refreshBtn" type="button" class="btn nav-tt navbar-right btn-success navbar-btn" data-toggle="tooltip" title="Clear filters" style="margin-right:5px;"><i class="fa fa-lg fa-refresh fa-spin"></i></button>
	<button id="resetBtn" type="button" class="btn nav-tt navbar-right btn-success navbar-btn" data-toggle="tooltip" title="Sync latest data" style="margin-right:5px;"><i class="fa fa-cloud-download fa-lg"></i> Sync</button>
    <button class="btn navbar-right nav-tt btn-default navbar-btn" data-toggle="tooltip" title="Advanced Filters" id="filterBtn" style="margin-right:5px;"><i class="fa fa-filter fa-lg"></i> Filter</button>
   
   <form class="navbar-form navbar-right" role="search" style="padding:0 20px 0 5px;">
	  <div class="form-group">
		<select id="unitsPerPage" class="form-control">
		    <option value="50">50 / pg</option>
		    <option value="100" selected="selected">100 / pg</option>
		    <option value="200">200 / pg</option>
		    <option value="300">300 / pg</option>
		</select>
	  </div>
    </form>
    
    </div><!--/.nav-collapse -->
</div>
</div>

<!-- Mainbody -->
<div class="container-fluid">
<div style="height:60px;"></div>
<!-- Google Manual labnol.org responsive ads-->
<div class="text-center" style="margin-bottom:5px;">
<div id="google-ads-1"></div>
<script type="text/javascript"> 
 
    /* Calculate the width of available ad space */
    ad = document.getElementById('google-ads-1');
 
    if (ad.getBoundingClientRect().width) {
	adWidth = ad.getBoundingClientRect().width; // for modern browsers 
    } else {
	adWidth = ad.offsetWidth; // for old IE 
    }
 
    /* Replace ca-pub-XXX with your AdSense Publisher ID */ 
    google_ad_client = "ca-pub-2145833818900192";
 
    /* Replace 1234567890 with the AdSense Ad Slot ID */ 
    google_ad_slot = "1402210464";
  
    /* Do not change anything after this line */
    if ( adWidth >= 728 )
      google_ad_size = ["728", "90"];  /* Leaderboard 728x90 */
    else if ( adWidth >= 468 )
      google_ad_size = ["468", "60"];  /* Banner (468 x 60) */
    else if ( adWidth >= 336 )
      google_ad_size = ["336", "280"]; /* Large Rectangle (336 x 280) */
    else if ( adWidth >= 300 )
      google_ad_size = ["300", "250"]; /* Medium Rectangle (300 x 250) */
    else if ( adWidth >= 250 )
      google_ad_size = ["250", "250"]; /* Square (250 x 250) */
    else if ( adWidth >= 200 )
      google_ad_size = ["200", "200"]; /* Small Square (200 x 200) */
    else if ( adWidth >= 180 )
      google_ad_size = ["180", "150"]; /* Small Rectangle (180 x 150) */
    else
      google_ad_size = ["125", "125"]; /* Button (125 x 125) */
 
    document.write (
     '<ins class="adsbygoogle" style="display:inline-block;width:' 
      + google_ad_size[0] + 'px;height:' 
      + google_ad_size[1] + 'px" data-ad-client="' 
      + google_ad_client + '" data-ad-slot="' 
      + google_ad_slot + '"></ins>'
    );
  
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</div>
<!--mainbody / Search box Custom-->
<table id="mytable" class="table-bordered table-responsive table-hover table-striped table-condensed" style="display:none;clear:both;width:100%;"></table>

<!-- ACTIVATION SCRIPTS -->
<script type="text/javascript">
$(document).ready( function(e) {
    /*Favourite localStorage Retreival and storage*/
    if (localStorage.msfavourites) {
	window.favSelect=localStorage.msfavourites.split(',');
    } else {
	window.favSelect=[];
    };
    /*Shared Fav Units Holding Var for Import*/
    window.sharedFavSelect=[];
    /*Fav custom filter*/
    window.showOnlyFavs=false;
    
    /*LocalStorage Retreival and storage*/
    if (localStorage.ffbeguideadv) {
    	/*Quick query to check for new entries*/
    	var serverUnitsCount=0;
    	var localUnitsCount=(!localStorage.ffbeguideadvCount) ? 0 : parseInt(localStorage.ffbeguideadvCount);
	var url = "https://sheets.googleapis.com/v4/spreadsheets/1oKx5_qbgx0pCspH9LFr0GV3_thT3VG6AiCXhdt1K56s/values/Units?key=AIzaSyCyF9yZ9Lyl57HAQXtzrd3yONewk4-fGSg&range=A:S";

	/*Send the JSONP request*/
	$.ajax({
		url: url,
		success: function (quickData) {
			console.log("success: "+quickData);
			serverUnitsCount=quickData.values.length;
			/*Prompt to Sync*/
			if (serverUnitsCount > localUnitsCount)
				bfpAlert("New Units Detected",'New units available for sync. You can sync now or later at any time. Do you wish to sync now? <div class="text-right"><button type="button" class="btn btn-success" id="syncNewBtn"><i class="fa fa-cloud-download"></i> Sync Now</button> <button type="button" class="btn btn-default" id="syncCancel">Cancel</button></div>');
			else {
				guideData=LZString.decompressFromUTF16(localStorage.ffbeguideadv);
				if (isValidJSON(guideData))
					initialize(JSON.parse(guideData));
				else {
					/*LocalStorage Delete and Refresh*/
					alert("Corrupted data detected or Data structure has changed. Proceed to Fix.");
					localStorage.removeItem("ffbeguideadv");
					localStorage.removeItem("ffbeguideadvCount");
					history.pushState(null, null, location.pathname);
					location.reload(true);
					}
				}
	  		}
	});
    } else {
	/*Init loader if no localstorage*/
	$('#progressModal').modal({
		keyboard:false,
		backdrop:'static',
		toggle:true
	})
    
    	var url = "https://sheets.googleapis.com/v4/spreadsheets/1oKx5_qbgx0pCspH9LFr0GV3_thT3VG6AiCXhdt1K56s/values/Units?key=AIzaSyCyF9yZ9Lyl57HAQXtzrd3yONewk4-fGSg&range=A:S";

	/*Send the JSONP request*/
	$.ajax({
		url: url,
		success: function (fusionData) {
			console.log("success: "+fusionData);
			/*Save in local storage*/
			localStorage.setItem("ffbeguideadv",LZString.compressToUTF16(JSON.stringify(fusionData)));
			
			localStorage.setItem("ffbeguideadvCount",fusionData.values.length);
			initialize(fusionData);
	  	}
	})
} /*End Else*/

/*BootStrap Stuff*/
$('.bfQn').popover();
$('.nav-tt').tooltip({placement:'bottom'});
$('#showFavBtn').tooltip({container:'body',placement:'bottom'});
$('body').tooltip({selector: '[class="statsInfo"]'});

/*VideoModal*/
    $(document).on("click", ".videoBtn", function(e){
	    e.preventDefault();
	    var vLink=$(this).attr('src');
	    $('.modal').each( function() {
		    $(this).modal('hide');
	    })
	    $('#vidEmbed').attr( 'src', vLink );
	    $('#videoModal').modal('show');
	})
/*VideoModal Close Remove Video*/
$('#videoModal').on('hide.bs.modal', function (e) {
    $('#vidEmbed').attr( 'src', '' );
})

/*compareModal Close Clear Squads and splice evounits variables*/
$('#compareModal').on('hidden.bs.modal', function (e) {
    clearSquad();
    gEvoUnits.splice(0,gEvoUnits.length);
})

/*Reset Pimp button onclose*/
$('#cardModal').on('hidden.bs.modal', function (e) {
    $("#pimpBtn").val("false");
})

/*RESET*/
$('#resetBtn').click( function(e) {
	/*Google analytics*/
	ga('send', 'pageview', {
  		'page': '/vurl/syncUnitGuideAdvance',
  		'title': 'FFBE Reset Data'
	});
    	/*LocalStorage Delete and Refresh*/
	localStorage.removeItem("ffbeguideadv");
	localStorage.removeItem("ffbeguideadvCount");
	history.pushState(null, null, location.pathname);
	location.reload(true);
})

/*Compare*/
window.compareSelect=[];
window.compareSelectURL="";

$(document).on("click", ".compareUnit", function(e) {
	var compareMax=100;
	e.preventDefault();
	if ( $(this).children('div').hasClass("btn-success") ) {
	    if ( compareSelect.length < compareMax ) { // Max units
		compareSelect.push($(this).attr("value"));
		$(this).children('div').removeClass("btn-success");
		$(this).children('div').addClass("btn-danger");
		$(this).children('div').html('<i class="fa fa-minus"></i> <i class="fa fa-users"></i>');
	    } else {
		bfpAlert("Max units selected",'You can only select maximum of '+compareMax+' units to compare / calculate evolution materials and for squad sprite simulation.<div class="text-right"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>')
	    }
	} else {
	    compareSelect.splice(compareSelect.indexOf($(this).attr("value")),1);
	    $(this).children('div').removeClass("btn-danger");
	    $(this).children('div').addClass("btn-success");
	    $(this).children('div').html('<i class="fa fa-plus"></i> <i class="fa fa-users"></i>');
	}
})
/*Compare button*/
    $(document).on("click", "#compareBtn, #evoBtn", function(e) {
	e.preventDefault();
	if ( compareSelect.length < 2 ) {
	    bfpAlert('Too few units','You need to select at least 2 units to compare / calculate evolution materials and squad sprite simulation. Use  <div class="btn btn-success btn-sm"><i class="fa fa-plus"></i> <i class="fa fa-users"></i></div> to add units.<div class="text-right"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>')
	} else {
	    compareSelectURL=compareSelect.join();
	    if ($(this).attr("id")=="evoBtn")
	    	tabSwitch="#evoCalc"
	    else
	    	tabSwitch="#unitCompareHome"
	    openCompare(compareSelect,tabSwitch); //AJAX+Modal
	    var compstate = { stateCompare: compareSelectURL };
	    history.pushState(compstate, "compare state", "?compare="+encodeURIComponent(compareSelectURL) );
	}
    })
    
/*fav Icon Link to OpenCard*/
$(document).on("click", ".favIconLink", function(e) {
	e.preventDefault();
	openCard($(this).attr("value"));
})

/*Add Favourites*/
$(document).on("click", ".addFav", function(e) {
	e.preventDefault();
	if ( $(this).children('div').hasClass("btn-default") ) {
	    /*when not added*/
		favSelect.push($(this).attr("value"));
		$(this).children('div').removeClass("btn-default");
		$(this).children('div').addClass("btn-warning");
		$(this).children('div').children('i').removeClass("text-muted");
		$(this).children('div').children('i').addClass("text-fav");
	} else {
	    /*when added*/
	    favSelect.splice(favSelect.indexOf($(this).attr("value")),1);
	    $(this).children('div').removeClass("btn-warning");
	    $(this).children('div').addClass("btn-default");
		$(this).children('div').children('i').removeClass("text-fav");
		$(this).children('div').children('i').addClass("text-muted");
	}
	/*Save in local storage*/
	localStorage.setItem("favourites",favSelect);
})

/*Fav button*/
    $(document).on("click", "#showFavBtn", function(e) {
	    e.preventDefault();
	    openFav(favSelect,"My favourite units",false); //AJAX+Modal
    })
    
/*Fav SORT*/
    $(document).on("click", ".sortFav", function(e) {
	    e.preventDefault();
	    var sortBy=$(this).attr("value");
	    /*Sort using global obj variable*/
	    switch (sortBy) {
		case "id":
		favUnitObj=favUnitObj.sort(function(a,b) {
			    return a.id-b.id;
		});
		break;
		case "rarity":
		favUnitObj=favUnitObj.sort(function(a,b) {
			    return b.rarity-a.rarity;
		});
		break;
		case "element":
		favUnitObj=favUnitObj.sort(function(a,b) {
		    if ( a.element < b.element )
			return -1;
		    if ( a.element > b.element )
			return 1;
		    return 0;
		});
		break;
	}
	/*Draw using Global Obj*/
	favDraw(favUnitObj);
    })
    
/*Import Favourites Prompt*/
$(document).on("click", "#importUnitsBtn", function(e){    
    bfpAlert("Import confirmation",'Importing this shared list will TOTALLY replace your current favourites on your system / browser. Please confirm if you wish to proceed.<div class="text-right"><button type="button" class="btn btn-danger" id="importUnitsBtnGO">Import</button> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>');
})

/*Import Favourites*/
$(document).on("click", "#importUnitsBtnGO", function(e){
	$('#favModal').modal('hide');
	$('#alertmodal').modal('hide');
	/*Replace favSelect global var with shared data*/
	favSelect=sharedFavSelect;
	/*Import new data to local storage*/
	    localStorage.setItem("favourites",favSelect);
	/*loader*/
	    var bbfeTable = $('#mytable').DataTable();
	/*Simply Redraw*/
	    bbfeTable.draw();
	setTimeout( function() {
	    bfpAlert("Import completion",'Import is now completed and the database is refreshed to reflect the new favourties.<div class="text-right"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>');
	    window.scrollTo(0,0);
	    },2000);
})

/*New units detect*/
$(document).on("click", "#syncDetectBtn", function(e){    
    bfpAlert("New Units Detected",'New units available for sync. You can sync now or later at any time. Do you wish to sync now? <div class="text-right"><button type="button" class="btn btn-success" id="syncNewBtn"><i class="fa fa-cloud-download"></i>Sync Now</button> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div>');
})

/*New units sync*/
$(document).on("click", "#syncNewBtn", function(e){    
	/*Force sync*/
	localStorage.removeItem("ffbeguideadv");
	localStorage.removeItem("ffbeguideadvCount");
	history.pushState(null, null, location.pathname);
	location.reload(true);
})

/*Cancel sync*/
$(document).on("click", "#syncCancel", function(e){    
	guideData=LZString.decompressFromUTF16(localStorage.ffbeguideadv);
	if (isValidJSON(guideData)) {
		$('#alertmodal').modal('hide');
		initialize(JSON.parse(guideData));
	} else {
		/*LocalStorage Delete and Refresh*/
		alert("Corrupted data detected or Data structure has changed. Proceed to Fix.");
		localStorage.removeItem("ffbeguideadv");
		localStorage.removeItem("ffbeguideadvCount");
		history.pushState(null, null, location.pathname);
		location.reload(true);
	}
})

/*Filter Favourites*/
$(document).on("click", "#filterFav", function(e){
	    var bbfeTable = $('#mytable').DataTable();
	    e.preventDefault();
	    if (!showOnlyFavs) {
	    showOnlyFavs=true;
	    bbfeTable.page.len( 100 ).draw();
	    window.scrollTo(0,0);
	    $("#filterFav").html('<i class="fa fa-filter text-success"></i> <b>UN</b>-Filter ALL <i class="fa fa-star-o"></i>');
	    } else {
		showOnlyFavs=false;
	    bbfeTable.page.len( 100 ).draw();
	    window.scrollTo(0,0);
	    $("#filterFav").html('<i class="fa fa-filter text-success"></i> Filter ALL <i class="fa fa-star-o"></i>');
	    }
})

/*Delete ALL Favourites*/
$(document).on("click", "#deleteFav", function(e){
	/*loader*/
	    bfpAlert("Delete ALL favourites",'Deleting all favourites from local storage.<div class="progress progress-striped active"><div class="progress-bar progress-bar-success"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div>');
	    var bbfeTable = $('#mytable').DataTable();
	    /*reset ID range select*/
	    $('#selectunithide').val(0);
	    /*unfilter favs*/
	    showOnlyFavs=false;
	    /*reset searches sorts queries*/
	    bbfeTable
		.search( '' )
		.columns().search( '' );
	    bbfeTable.page.len(-1);
	    bbfeTable
		.column( 0 )
		.order( 'asc' )
		.draw();
	    $(document).find('.addFav').each( function() {
		if ( $(this).children('div').hasClass("btn-warning") ) {
	    $(this).children('div').removeClass("btn-warning");
	    $(this).children('div').addClass("btn-default");
		$(this).children('div').children('i').removeClass("text-fav");
		$(this).children('div').children('i').addClass("text-muted");
		}
	    })
	/*reset favVariable*/
		favSelect=[];
		/*reset localstorage*/
		localStorage.setItem("favourites",favSelect);
	/*reset page length*/
	    bbfeTable.page.len(100).draw();
	    setTimeout( function() {
	    $('#alertmodal').modal('hide');
	    window.scrollTo(0,0);
	    },2000);
})

/*Series Query*/
    $(document).on("click", ".serieslink", function(e) {
	var bbfeTable = $('#mytable').DataTable();
	e.preventDefault();
	    bbfeTable
		.columns( 3 )
		.search( $(this).text() );
	    bbfeTable
		.column( 0 )
		.order( 'asc' )
		.draw();
	window.scrollTo(0,0);
    })
/*Batch Query*/
    $(document).on("click", ".batchlink", function(e) {
	var bbfeTable = $('#mytable').DataTable();
    var state = { stateBatch: $(this).text() };
    history.pushState(state, "batch state", "?batch="+encodeURIComponent($(this).text()) );
	e.preventDefault();
	    /*clear search query field*/
	    bbfeTable
	    .search('');
	    /*search only batch column*/
	    bbfeTable
		.columns( 4 )
		.search( $(this).text()?'^'+$(this).text()+'$':$(this).text(), true, false);
		/*sort and consolidated draw*/
	    bbfeTable
		.column( 3 )
		.order( 'asc' )
		.draw();
	window.scrollTo(0,0);
    })
/*CustomSelect PageLength*/
    $(document).on("change", "#unitsPerPage", function(e){
	    var bbfeTable = $('#mytable').DataTable();
	    bbfeTable.page.len( $(this).val() ).draw()
	})

/*Page change scroll to top*/
$('#mytable').on( 'page.dt', function (e) {
    window.scrollTo(0,0);
})

/*Sprite BG*/
    $(document).on("click", ".thumbnail", function(e){
	e.preventDefault();
	$('#bgSpriteShow').attr('src',$(this).children('img').attr('src'));
    })

/*Squad Change Button*/
$(document).on("click", ".squadALL", function(e){
    var linkVal=$(this).val();
    for (var i=0;i<6;i++) {
	$('#squadUnit'+(i+1)).attr('src',ownSquad[linkVal]);
	$('#squadUnit'+(i+1)).error( function() {
		$(this).unbind();
		$(this).attr('src',"https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif");
	})
    }
})

/*Squad Customise by Select*/
$(document).on("change", ".cFSquad", function(e){
    var deltaField=parseInt( $(this).attr('id').slice(-1) );
    if ( $(this).val() != 'None' ) {
	var deltaField=parseInt( $(this).attr('id').slice(-1) );
	$('#squadUnit'+(deltaField+1)).attr('src',ownSquad[$(this).val()]);
	$('#squadUnit'+(deltaField+1)).error( function() {
		$(this).unbind();
		$(this).attr('src',"https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif");
	})
    } else {
	$('#squadUnit'+(deltaField+1)).attr('src',"https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif");
    }
})

/*Squad Random*/
$(document).on("click", "#randomOwn,#randomOpp", function(e){
    /*Randomise code for opp / own units*/
    if ( $(this).attr('id') == 'randomOwn' ) {
	var randomEle = '#squadUnit'
    } else { 
	var randomEle = '#squadOpp';
	/*Clears boss*/
	$('#bossIMG').children('img').attr('src','https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif');
    }
    for (var i=0;i<6;i++) {
	var linkVal=Math.floor((Math.random() * deserialdata.length));
	var ovsprite = "https://googledrive.com/host/0B4hJr8BXxvFZQk1JcFBvT2xEMUk/sprite"+deserialdata[linkVal]['id']+".gif";
	$(randomEle+(i+1)).attr('src',ovsprite);
	$(randomEle+(i+1)).error( function() {
		$(this).unbind();
		$(this).attr('src',ownSquad[Math.floor((Math.random() * ownSquad.length))]);
	})
    }
})

/*Squad Random*/
$(document).on("change", "#bossSelect", function(e){
    var noIMG='https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif';
    if ( $(this).val() != 'None' ) {
	for (var i=0;i<6;i++) {
	    $('#squadOpp'+(i+1)).attr('src',noIMG);
	    $('#squadOwn'+(i+1)).attr('src',noIMG);
	}
	for (var i=0; i<bossList.length; i++) {
	    if (bossList[i].shortname === $(this).val() ) {
		$('#bossIMG').children('img').attr('src','https://googledrive.com/host/0B4hJr8BXxvFZQk1JcFBvT2xEMUk/spriteboss_'+bossList[i].shortname+'.gif');
		$('#bossIMG').css('left',bossList[i].xpos+'px');
		$('#bossIMG').css('top',bossList[i].ypos+'px');
		/*check for flipping*/
		if ( ( bossList[i].flip === 'yes' ) && (!$('#bossIMG').children('img').hasClass('flipHori')) ) {
		    $('#bossIMG').children('img').addClass('flipHori')
		} else if ( ( bossList[i].flip === 'no' ) && ($('#bossIMG').children('img').hasClass('flipHori')) ) {
		    $('#bossIMG').children('img').removeClass('flipHori')
		}
		break;
	    }
	}
    } else {
	$('#bossIMG').children('img').attr('src',noIMG);
    }
})

/*Filter Button*/
$(document).on("click", "#filterBtn", function(e){
	    e.preventDefault();
	    $('#filterModal').modal('show');
	    	/*Google analytics*/
		ga('send', 'pageview', {
  			'page': '/vurl/filterfeature',
  			'title': 'Brave Frontier PROs Filter Feature'
		});
})

/*Sel ALL / None*/
$(document).on("click", ".selEleFilter, .selRareFilter", function(e){
	var selAction=$(this).text();
	if ($(this).hasClass('selEleFilter'))
		var changeClass=".filElement";
	else
		var changeClass=".filRarity";
	$(changeClass).each( function(){
		if (selAction=="ALL") {
			$(this).prop('checked',true);
			if (!$(this).parent().hasClass("active"))
				$(this).parent().addClass("active")
		} else {
			$(this).prop('checked',false);
			if ($(this).parent().hasClass("active"))
				$(this).parent().removeClass("active")
		}
	})
})

/*Execute Filter*/
$(document).on("click", "#execFilter", function(e){
	    e.preventDefault();
	    var bbfeTable = $('#mytable').DataTable();
	/*Unit Skills filter*/
	regexArr=[];
	$('.filSkills:checked').each( function(){
		regexArr.push(escapeRegExp($(this).val()))
	})
	if (regexArr.length!=0) {
		regexStr="^.*"+regexArr.join("\|^.*");
		bbfeTable.search( regexStr,true,false );
	} else {
	    bbfeTable.search( '' );
	}
	/*Filter by element multi-value via REGEX*/
	regexArr=[];
	$('.filElement:checked').each( function(){
		regexArr.push($(this).val())
	})
	if (regexArr.length!=0) {
		regexStr="^"+regexArr.join("\|");
		bbfeTable.column( 6 ).search( regexStr,true,false );
	} else {
	    bbfeTable.column( 6 ).search( '' );
	}
	/*Filter by rarity multi-value via REGEX*/
	regexArr=[];
	$('.filRarity:checked').each( function(){
		regexArr.push($(this).val())
	})
	if (regexArr.length!=0) {
		regexStr="^"+regexArr.join("$\|")+"$";
		bbfeTable.column( 5 ).search( regexStr,true,false );
	} else {
	    bbfeTable.column( 5 ).search( '' );
	}
	/*Unit ID Range filter*/
	$("#selectunithide").val($('input:radio[name="filUnitId"]:checked').val());
	/*Server filter*/
	switch ($('input:radio[name="filServer"]:checked').val()) {
		case "All":
		bbfeTable.column( 49 ).search("");
		bbfeTable.column( 48 ).search("");
		    break;
		case "Japan":
		bbfeTable.column( 48 ).search("");
		bbfeTable.column( 49 ).search("TRUE");
		    break;
		case "Global":
		bbfeTable.column( 49 ).search("");
		bbfeTable.column( 48 ).search("TRUE");
		    break;
	}
	/*Draw after all filters are made*/
	    bbfeTable.column( 0 ).order( 'desc' ).draw();
	    $('#filterModal').modal('hide');
	    window.scrollTo(0,0);
})

/*Bind REFRESH*/
    $(document).on("click", "#refreshBtn", function(e){
	    e.preventDefault();
		/*Google analytics*/
		ga('send', 'pageview', {
	  		'page': '/vurl/refresh',
	  		'title': 'BBFE Refresh'
		});
	    /*loader*/
	    bfpAlert("Refresh",'Clearing all selections ... please wait<div class="progress progress-striped active"><div class="progress-bar progress-bar-success"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div>');
	    var bbfeTable = $('#mytable').DataTable();
	    /*reset ID range select*/
	    $('#selectunithide').val(0);
	    /*unfilter favs*/
	    showOnlyFavs=false;
	    /*reset searches sorts queries*/
	    bbfeTable
		.search( '' );
		bbfeTable
		.columns().search( '' );
	    bbfeTable.page.len(-1);
	    bbfeTable
		.column( 0 )
		.order( 'asc' )
		.draw();
	    /*reset compare add/remove button*/
	    $(document).find('.compareUnit').each( function() {
		if ( $(this).children('div').hasClass("btn-danger") ) {
		    $(this).children('div').removeClass("btn-danger");
		    $(this).children('div').addClass("btn-success");
		    $(this).children('div').html('<i class="fa fa-plus"></i> <i class="fa fa-users"></i>');
		}
	    })
	    /*reset compare array*/
	    compareSelect=[];
	    /*reset page length*/
	    bbfeTable.page.len(100).draw();
	    /*reset pushstate*/
	    history.pushState(null, null, location.pathname);
	    /*change search field*/
	    $('.dataTables_filter input').val('');
	    setTimeout( function() {
	    $('#alertmodal').modal('hide');
	    window.scrollTo(0,0);
	    },2000);
	})
/*Binding Hashtags*/
    $(document).on("click", ".hashSelect", function(e){
	    var bbfeTable = $('#mytable').DataTable();
	    e.preventDefault();
	    bbfeTable
		.column( 38 )
		.search( $(this).attr("value") );
	    bbfeTable
		.column( 0 )
		.order( 'desc' )
		.draw();
	    window.scrollTo(0,0);
	})
/*Binding TOP by Element*/
    $(document).on("click", ".topUnits", function(e){
	    var bbfeTable = $('#mytable').DataTable();
	    e.preventDefault();
	    bbfeTable
		.column( 6 )
		.search( $(this).attr("value") );
	    bbfeTable
		.column( 17 )
		.order( 'desc' )
		.draw();
	    window.scrollTo(0,0);
	})
/*Binding unitcard*/
    $(document).on("click", ".unitName", function(e){
	    openCard($(this).text());
	    e.preventDefault();
	})
	
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
  }
})();

/*Update URL based on search filters*/
    $(document).on("keyup", '.dataTables_filter input', function(e){
	delay(function(){
	var bbfeTable = $('#mytable').DataTable();
	var sField='.dataTables_filter input';
	bbfeTable.search( $(sField).val() ).draw();
	window.scrollTo(0,0);
	/*Enter Key only*/
	if (e.which == 13) {
	    var state = { stateFilter: $(sField).val() };
	    history.pushState(state, "Fstate", "?query="+encodeURIComponent($(sField).val()) );
	}
	}, 450 );
    })
    
/*POP state*/
    $(window).on('popstate', function(e) {
	var state = e.originalEvent.state;
	/*card state*/
	if (state.stateUnit) {
	    $('#compareModal').modal('hide');
	    openCard( state.stateUnit );
	}
	/*comp state*/
	if (state.stateCompare) {
	    var tempArray = ( state.stateCompare ).split(',');
	    $('#cardModal').modal('hide');
	    openCompare(tempArray);
	}
	/*Search query state*/
	if (state.stateFilter) {
	    var bbfeTable = $('#mytable').DataTable();
	    bbfeTable.search( state.stateFilter ).draw();
	}
	/*Batch State*/
	if (state.stateBatch) {
	    var bbfeTable = $('#mytable').DataTable();
	    e.preventDefault();
	    bbfeTable
	    .search('');
	    bbfeTable
		.columns( 4 )
		.search( state.stateBatch );
	    bbfeTable
		.column( 3 )
		.order( 'asc' )
		.draw();
	    window.scrollTo(0,0);
	}
    })
    
    /*Effect*/
    $(document).on("change", ".effects", function(){
	if ( $('input[name=effectsRadio]:checked').val() != 'none' ) {
	    $('#bgSpriteEffect').attr('src','https://googledrive.com/host/0B4hJr8BXxvFZWmxjWm8zZjVVNVE/'+$('input[name=effectsRadio]:checked').val()+'.gif');
	    $("#bgSpriteEffectDiv").css('top', $('input[name=effectsRadio]:checked').attr('y-pos')+'px');
	    $('#bgSpriteEffect').show();
	} else {
	    $('#bgSpriteEffect').attr('src','');
	    $('#bgSpriteEffect').hide();
	}
    })
    
    /*Modification fields*/
    $(document).on("change", "#sphereA,#sphereB,.askill,.lskill", function(){
	totalStatsMod();
    })
    /*PimpMod*/
    $(document).on("click", "#pimpBtn", function(){
	var cToAdd=($(this).hasClass("btn-success")) ? "btn-danger" : "btn-success";
	var cToRem=(cToAdd=="btn-danger") ? "btn-success" : "btn-danger";
	var vToCng=($(this).val()=="true") ? "false" : "true";
	var tToCng=($(this).text()=="Pimp it!") ? "UNPimp it!" : "Pimp it!";
	$(this).removeClass(cToRem);
	$(this).addClass(cToAdd);
	$(this).text(tToCng);
	$(this).val(vToCng);
	totalStatsMod();
    })
    
    /*Evo Mats Change Unit Quantity*/
    $(document).on("change", ".evoMatSelect", function() {
	var evoMat=[];
	var evoIdx=-1;
	      for (var i=0; i < gEvoUnits.length; i++) {
		for (var j=1; j<6; j++) {
		    /*grab value+units selected*/
		    var evoCheck=gEvoUnits[i]["evo "+j];
		    var evoCheckCount=parseInt($('#sEvoUnit'+i).val());
		    if ((evoCheck!="") && (evoCheck!="None")) {
			if (evoMat.length === 0) {
			    evoMat.push( {"mat":evoCheck,"count":evoCheckCount } );
			} else {
				    /*New Evo mat to add*/
				    for (k=0; k < evoMat.length; k++) {
					if (evoMat[k].mat==evoCheck) {
					    evoIdx=k;
					    break;
					} else { 
					    evoIdx=-1
					}
				    }
				    if (evoIdx === -1) {
					    evoMat.push( {"mat":evoCheck,"count":evoCheckCount } );
				    } else {
					/*add to existing*/
					    evoMat[evoIdx].count+=evoCheckCount;
				    }
			    }
		    } /*End blank or none check*/
		}
	      }
	    evoMat=evoMat.sort(function(a,b) {
		    if (a.mat < b.mat) return -1;
	    if (a.mat > b.mat) return 1;
	    return 0;
	    })
	    /*dynamically change values*/
	    var evoCHTML='';
	    for (i=0;i<evoMat.length;i++) {
		if (evoMat[i].count !==0) {
			evoCHTML+='<div class="col-xs-1 col-md-1">';
			evoCHTML+='<img src="'+getEvoIMG(evoMat[i].mat)+'" width="35"/>';
			evoCHTML+='<h4><b>x</b>'+evoMat[i].count+'</h4>';
			evoCHTML+='</div>';
		}
	    }
	    if ( evoCHTML == '' ) {
		evoCHTML+='<h4>No Materials Needed.</h4>';
	    }
	    $('#totalEvoMats').html(evoCHTML);
    })
})
</script>

<!-- Google Responsive Ad -->
<div class="text-center clear" style="width:100%;margin:0 auto;">
<!-- Google Manual labnol.org responsive ads-->
<div id="google-ads-2"></div>
<script type="text/javascript"> 
 
    /* Calculate the width of available ad space */
    ad = document.getElementById('google-ads-2');
 
    if (ad.getBoundingClientRect().width) {
	adWidth = ad.getBoundingClientRect().width; // for modern browsers 
    } else {
	adWidth = ad.offsetWidth; // for old IE 
    }
 
    /* Replace ca-pub-XXX with your AdSense Publisher ID */ 
    google_ad_client = "ca-pub-2145833818900192";
 
    /* Replace 1234567890 with the AdSense Ad Slot ID */ 
    google_ad_slot = "1402210464";
  
    /* Do not change anything after this line */
    if ( adWidth >= 728 )
      google_ad_size = ["728", "90"];  /* Leaderboard 728x90 */
    else if ( adWidth >= 468 )
      google_ad_size = ["468", "60"];  /* Banner (468 x 60) */
    else if ( adWidth >= 336 )
      google_ad_size = ["336", "280"]; /* Large Rectangle (336 x 280) */
    else if ( adWidth >= 300 )
      google_ad_size = ["300", "250"]; /* Medium Rectangle (300 x 250) */
    else if ( adWidth >= 250 )
      google_ad_size = ["250", "250"]; /* Square (250 x 250) */
    else if ( adWidth >= 200 )
      google_ad_size = ["200", "200"]; /* Small Square (200 x 200) */
    else if ( adWidth >= 180 )
      google_ad_size = ["180", "150"]; /* Small Rectangle (180 x 150) */
    else
      google_ad_size = ["125", "125"]; /* Button (125 x 125) */
 
    document.write (
     '<ins class="adsbygoogle" style="display:inline-block;width:' 
      + google_ad_size[0] + 'px;height:' 
      + google_ad_size[1] + 'px" data-ad-client="' 
      + google_ad_client + '" data-ad-slot="' 
      + google_ad_slot + '"></ins>'
    );
  
    (adsbygoogle = window.adsbygoogle || []).push({});
 
</script>
</div>

<!-- disqus discussion -->
<div class="row"><div class="col-xs-12">
<div id="disqus_thread"></div>
    <script type="text/javascript">
	var disqus_shortname = 'finalfantasybraveexvius';
	(function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div></div>
</div> <!-- /container -->

<!-- Video Modal-->
<div class="modal fade" id="videoModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
<button type="button" class="close" style="position:absolute;z-index:99;top:-18px;right:-18px;" data-dismiss="modal" aria-hidden="true"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-inverse fa-stack-1x"></i></span></button>
<div class="vidContain">
<iframe id="vidEmbed" src=""></iframe>
</div>
<div class="pull-right small">Courtesy of <a href="https://www.youtube.com/user/Ushitarius" target="_blank">Ushi Gaming Channel</a></div>

      </div>
    </div>
  </div>
</div>

<!-- Modal for Favourites -->
<div class="modal fade" id="favModal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	<h4 class="modal-title" id="favTitle"></h4>
    </div>
      <div class="modal-body">
	    <div class="container-fluid">
	    <!-- For Buttons -->
		<div class="row">
		    <div class="col-xs-11 col-sm-11 col-md-11" style="margin-bottom:10px;">
			<div class="row" id="favSortDisplay"></div>
		    </div>
		</div>
	<!-- For units -->
		<div class="row">
		    <div class="col-xs-11 col-sm-11 col-md-11">
			<div class="row" id="favIconDisplay"></div>
		    </div>
		</div>
	<!-- For SharingURL -->
		<div class="row">
		    <div class="col-xs-11 col-sm-11 col-md-11">
			<div class="row" id="favLinkDisplay"></div>
		    </div>
		</div>
	    </div> <!-- End Container -->
      </div>
    </div>
  </div>
</div>

<!-- Modal for Progress-->
<div class="modal fade" id="progressModal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
	<div class="text-center">
	    <h3 class="text-primary"><b>Summoning units</b></h3>
	    <i class="fa fa-spinner fa-spin fa-5x"></i>
	    <h4 class="text-primary">A moment please ...</h4>
	    <h5>(Note: Images will continue to load progressively after.)</h5>
	</div>
      </div>
    </div>
  </div>
</div>

<!-- Compare Modal -->
<div class="modal fade" id="compareModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
      <button type="button" class="close" style="position:absolute;z-index:99;top:-18px;right:-18px;" data-dismiss="modal" aria-hidden="true"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-inverse fa-stack-1x"></i></span></button>

<!-- Google link text across all tab panes -->
<div class="text-center">
    <!-- BFPROsLinkUnits DB Overlay -->
    <ins class="adsbygoogle"
	 style="display:inline-block;width:468px;height:15px"
	 data-ad-client="ca-pub-2145833818900192"
	 data-ad-slot="7885767265"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<!-- Nav tabs -->
<ul class="nav nav-tabs" role="tablist">
      <li class="active"><a href="#unitCompareHome" role="tab" data-toggle="tab"><kbd><i class="fa fa-users"></i></kbd> Compare Units</a></li>
      <li><a href="#evoCalc" role="tab" data-toggle="tab"><i class="fa fa-calculator"></i> Evo Calculator</a></li>
      <li><a href="#squadPlay" role="tab" data-toggle="tab"><i class="fa fa-rocket"></i> Squad Play</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane fade in active" style="overflow:auto;" id="unitCompareHome">
	<table id="compareTable" class="table table-striped table-bordered table-responsive table-condensed small"></table>
  </div>
  <div class="tab-pane fade" id="evoCalc">
	<div class="container-fluid">
	    <div id="evoCalcContent" class="row" style="margin-top:15px;"></div>
	</div>
    </div>
  <div class="tab-pane fade" id="squadPlay">
    <div class="container-fluid">
      <div class="row">
	<div class="col-xs-12 col-sm-12 col-md-6" style="margin:auto;margin-top:15px;padding:0;height:400px;">
	    <div style="position:absolute;overflow:hidden;">
		<img id="bgSquad" src="https://googledrive.com/host/0B4hJr8BXxvFZWmxjWm8zZjVVNVE/bg_arena.jpg" width="400"/>
	    <!--Own units RIGHT*-->
		<div style="position:absolute;left:170px;top:110px;"><img id="squadUnit1" src=""/></div>
		<div style="position:absolute;left:250px;top:120px;"><img id="squadUnit2" src=""/></div>
		<div style="position:absolute;left:205px;top:180px;"><img id="squadUnit3" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:280px;top:180px;"><img id="squadUnit4" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:185px;top:250px;"><img id="squadUnit5" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:270px;top:240px;"><img id="squadUnit6" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
	    <!--Opp units LEFT-->
		<div style="position:absolute;left:85px;top:110px;"><img id="squadOpp1" class="flipHori" src=""/></div>
		<div style="position:absolute;left:05px;top:120px;"><img id="squadOpp2" class="flipHori" src=""/></div>
		<div style="position:absolute;left:50px;top:180px;"><img id="squadOpp3" class="flipHori" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:-25px;top:180px;"><img id="squadOpp4" class="flipHori" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:70px;top:250px;"><img id="squadOpp5" class="flipHori" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		<div style="position:absolute;left:-15px;top:240px;"><img id="squadOpp6" class="flipHori" src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		
		<!--Boss Blank-->
		<div id="bossIMG" style="position:absolute;left:0px;top:0px;"><img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/iconblank.gif"/></div>
		
	    </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-5" style="margin-top:15px;">
    <h4>Custom OWN Squad</h4>
    <div id="customSquad"></div>
    <div class="clear"></div>
	<h4>Change ALL Units in OWN Squad to:</h4>
	<div id="squadChange"></div>
	<h4>Squad randomiser:</h4>
	<div class="btn-group">
	  <button type="button" id="randomOpp" class="btn btn-sm btn-danger">Opponent Squad</button>
	  <button type="button" id="randomOwn" class="btn btn-sm btn-info">Own Squad</button>
	</div>
	<h4>Fight a BOSS!</h4>
	<div class="col-xs-8 col-sm-8 col-md-12" style="margin-bottom:15px;">
	<select id="bossSelect" class="form-control input-sm"><option selected="selected">None</option></select>
	</div>
    </div>
    </div><!--EndROW-->
    
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6">
	<small style="margin-top:15px;">Animated Sprites - Courtesy of <a href="https://felixfelice.imgur.com/" target="_blank">FelixFelice &amp; Team</a></small>
    </div>
</div>

    </div><!--End Container-->
  </div>
</div> <!--End Tab Content-->
	
      </div>
    </div>
  </div>
</div>

<!-- Modal for Card-->
<div class="modal fade" id="cardModal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
	<button type="button" class="close" style="position:absolute;z-index:99;top:-18px;right:-18px;" data-dismiss="modal"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-inverse fa-stack-1x"></i></span></button>

    <!-- BFPROsLinkUnits DB Overlay -->
    <ins class="adsbygoogle"
	 style="display:inline-block;width:468px;height:15px"
	 data-ad-client="ca-pub-2145833818900192"
	 data-ad-slot="7885767265"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
	
	<!-- Nav tabs -->
	<ul class="nav nav-tabs" role="tablist">
	      <li class="active"><a href="#unitCardHome" role="tab" data-toggle="tab"><strong><i class="fa fa-book"></i> Monster Card</strong></a></li>
	      <li><a href="#unitCardArt" role="tab" data-toggle="tab"><i class="fa fa-photo"></i> Monster Art</a></li>
	</ul>

<!-- Tab panes -->
    <div class="tab-content">
	<div class="tab-pane fade in active" id="unitCardHome"></div>
    <div class="tab-pane fade" id="unitCardArt">
	<div id="unitimageacc"></div>
    </div>
</div><!--End Tab Content-->

      </div>
    </div>
  </div>
</div> <!-- End Card Modal -->

<!-- Filter Modal-->
<div class="modal fade" id="filterModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
	<button type="button" class="close" data-dismiss="modal">
	  <span aria-hidden="true">&times;</span>
	  <span class="sr-only">Close</span>
	</button>
	<h4 class="modal-title">Advanced Filters</h4>
      </div>
      
      <div class="modal-body">
	<h5><b>by Server</b></h5>

	<div class="btn-group" data-toggle="buttons">
	  
	  <label class="btn btn-default active">
	    <input type="radio" name="filServer" value="All" checked><b>All</b>
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filServer" value="Global">Global
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filServer" value="Japan">Japan
	  </label>
	  
	</div>
	
	<h5><b>by Unit ID Range</b></h5>
	
	<div class="btn-group" data-toggle="buttons">
	  
	  <label class="btn btn-default active">
	    <input type="radio" name="filUnitId" value="0" checked><b>All Units</b>
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="100">1-100 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="200">101-200 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="300">201-300 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="400">301-400 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="500">401-500 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="600">501-600 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="700">601-700 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="800">701-800 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="900">801-900 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="1000">901-1000 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="8099">8000-8100 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="radio" name="filUnitId" value="8199">8100-8200
	  </label>
	</div>
	
	<input type="hidden" id="selectunithide" value="0"/>
	
	<h5><b>by Elements</b></h5>
	
	<div class="btn-group">
	  <button type="button" class="btn btn-primary selEleFilter">ALL</button>
	  <button type="button" class="btn btn-info selEleFilter">None</button>
	</div>
	
	<div class="btn-group" data-toggle="buttons">
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Fire" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/fireminiicon.png"/>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Water" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/waterminiicon.png"/>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Earth" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/Earthminiicon.png"/>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Thunder" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/thunderminiicon.png"/>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Light" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/lightminiicon.png"/>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filElement" value="Dark" checked>
	    <img src="https://googledrive.com/host/0B4hJr8BXxvFZZVVOZWswdnlnYTg/darkminiicon.png"/>
	  </label>

	</div>
	
	<h5><b>by Rarity</b></h5>
	
	<div class="btn-group">
	  <button type="button" class="btn btn-primary selRareFilter">ALL</button>
	  <button type="button" class="btn btn-info selRareFilter">None</button>
	</div>
	
	<div class="btn-group" data-toggle="buttons">
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="1" checked>1<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="2" checked>2<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="3" checked>3<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="4" checked>4<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="5" checked>5<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="6" checked>6<i class="fa fa-star"></i>
	  </label>
	  
	  <label class="btn btn-default active">
	    <input type="checkbox" class="filRarity" value="7" checked>7<i class="fa fa-star"></i>
	  </label>
	</div>
	
	<h5><b>by Skill Effects</b></h5>
	
	<div class="btn-group" data-toggle="buttons">
	  <label class="btn btn-primary">
	    <input type="checkbox" class="filSkills" value="CRIT+">CRIT Rate 
	  </label>
	  
	  <label class="btn btn-primary">
	    <input type="checkbox" class="filSkills" value="CRIT DMG+">CRIT DMG 
	  </label>
	  
	  <label class="btn btn-primary">
	    <input type="checkbox" class="filSkills" value="Spark DMG+">Spark DMG 
	  </label>
	  
	  <label class="btn btn-primary">
	    <input type="checkbox" class="filSkills" value="DMG+ to Weak">Weak Elements DMG 
	  </label>
	  
	  <label class="btn btn-primary">
	    <input type="checkbox" class="filSkills" value="Ignore DEF">Ignore DEF 
	  </label>
	  
	  <label class="btn btn-success">
	    <input type="checkbox" class="filSkills" value="ATK+">Buff ATK 
	  </label>
	  
	  <label class="btn btn-success">
	    <input type="checkbox" class="filSkills" value="DEF+">Buff DEF 
	  </label>
	  
	  <label class="btn btn-success">
	    <input type="checkbox" class="filSkills" value="REC+">Buff REC 
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="BC+">BC+ 
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="BC Fill">BC Fill+ 
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="BB Fill">BB Fill 
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="Reduce BC">-BC to Fill BB 
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="Reduce BB Gauge Used">Reduce BB Gauge Used
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="Full BB to Self">Full BB to Self
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="BB Fill when ATKed">BB Fill when ATKed
	  </label>
	  
	  <label class="btn btn-info">
	    <input type="checkbox" class="filSkills" value="BB Fill on Spark">BB Fill on Spark
	  </label>
	  
	  <label class="btn btn-danger">
	    <input type="checkbox" class="filSkills" value="HC+">HC+ 
	  </label>
	  
	  <label class="btn btn-danger">
	    <input type="checkbox" class="filSkills" value="HC Fill">HC Fill+ 
	  </label>
	  
	  <label class="btn btn-danger">
	    <input type="checkbox" class="filSkills" value="Heal">Healing
	  </label>
	  
	  <label class="btn btn-danger">
	    <input type="checkbox" class="filSkills" value="Drain HP">Drain HP
	  </label>
	  
	  <label class="btn btn-danger">
	    <input type="checkbox" class="filSkills" value="Heal when ATKed">Heal when ATKed
	  </label>
	  
	  <label class="btn btn-warning">
	    <input type="checkbox" class="filSkills" value="Item+">Item+ 
	  </label>
	  
	  <label class="btn btn-warning">
	    <input type="checkbox" class="filSkills" value="Karma+">Karma+ 
	  </label>
	  
	  <label class="btn btn-warning">
	    <input type="checkbox" class="filSkills" value="Zel+">Zel+ 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Add ">Add Ele / Ails
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Powerful">Powerful BB 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Massive">Massive BB 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Reduce DMG">Reduce DMG 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Random Ail">Random Ail 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Cure Ails">Cure Ails 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Nulls Ails">Nulls Ails 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Para">Paralysis 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Weak">Weakness 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Injury">Injury 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Curse">Curse 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Sick">Sickness 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Poison">Poison 
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Convert">Convert Stats
	  </label>
	  
	  <label class="btn btn-default">
	    <input type="checkbox" class="filSkills" value="Reduce Enemy">Reduce Enemy ATK/DEF
	  </label>
	  
	</div>
	
	<div class="clear row"></div>
      </div>
      
      <div class="modal-footer">
	<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	<button type="button" class="btn btn-primary" id="execFilter">
	  <i class="fa fa-filter"></i> Filter
	</button>
      </div>
    </div>
  </div>
</div>

<!-- Alert Modal -->
<div class="modal fade" id="alertmodal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 class="modal-title text-danger"><i class="fa fa-fire"></i> Lugina Grumbles Grumbles</h3></div>
      <div class="modal-body">
	<div id="alertSpace" class="alert"></div>
      </div>
    </div>
  </div>
</div>

<!--Chatroom-->
<script id="sid0020000073204835322">(function() {function async_load(){s.id="cid0020000073204835322";s.src=(window.location.href.indexOf('file:///') > -1 ? 'http:' : '') + '//st.chatango.com/js/gz/emb.js';s.style.cssText="width:450px;height:550px;";s.async=true;s.text='{"handle":"bravefrontierpros","arch":"js","styles":{"a":"cc66cc","b":84,"c":"ffffff","d":"ffffff","e":"ffffff","f":93,"h":"ffffff","k":"cc66cc","l":"cc66cc","m":"cc66cc","o":84,"q":"cc66cc","r":84,"t":0,"pos":"bl","cv":1,"cvfnt":"\'Helvetica Neue\', Helvetica, Arial, sans-serif, sans-serif","cvbg":"cc66cc","cvbga":84,"cvw":300,"cvh":30,"sbc":"33ff33","surl":0,"ticker":1}}';var ss = document.getElementsByTagName('script');for (var i=0, l=ss.length; i < l; i++){if (ss[i].id=='sid0020000073204835322'){ss[i].id +='_';ss[i].parentNode.insertBefore(s, ss[i]);break;}}}var s=document.createElement('script');if (s.async==undefined){if (window.addEventListener) {addEventListener('load',async_load,false);}else if (window.attachEvent) {attachEvent('onload',async_load);}}else {async_load();}})();</script>
</body>
</html>
